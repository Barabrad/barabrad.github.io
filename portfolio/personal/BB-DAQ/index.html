<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="icon" type="image/png" href="/favicon.ico?" />
        <link rel="apple-touch-icon" type="image/x-icon" href="/favicon.ico?" />
        <title>BB-DAQ</title>
        <link rel="stylesheet" href="/commonStyles.css">
        <script src="/sharedJS.js"></script>
    </head>
    <body a link="blue" vlink="blue">
        <h1>BB-DAQ</h1>
        <h2>Goal</h2>
        <p>Create a Mac-friendly workaround for <a href="https://www.parallax.com/package/plx-daq/" target="_blank">PLX-DAQ</a> while still maintaining support for Windows.</p>
        <h2>Cause</h2>
        <p>A lab assignment in Spring 2023 required us to write serial data from an Arduino to an Excel spreadsheet using PLX-DAQ. However, PLX-DAQ uses COM ports, which Macs do not have.</p>
        <h2>Process</h2>
        <p>Because this project was for an assignment with a close due date, the first iteration was a single Python file that only read and wrote the data without plotting it in live time. Within a week, I added the graphing functionality in preparation for the next assignment with PLX-DAQ. The code remained largely untouched until the following year's students ran an issue due to the different Arduino they were using. After I wrote another file to mitigate that issue for future students, I started to maintain the code as a personal project. Since then, the code has been cleaned up, and more PLX-DAQ functionality has been added.</p>
        <p>During Spring 2025, since there were no issues brought up, I significantly restructured the code and added two GitHub actions that check the code with <a href="https://www.pylint.org" target="_blank">pylint</a> and <a href="https://docs.pytest.org/en/stable/" target="_blank">pytest</a>. For the former, I used the warning messages as guidelines for the many changes I made, including the use of objects representing the user's file and graph choices. However, I made a configuration file and changed some of the original settings since satisfying every warning message would sacrifice readability and time (not only time spent running the code, but also processing time in the main loop). For the latter, I wrote a series of tests ranging from testing input validation to testing the main loop. The biggest challenges were figuring out how to mimic the user's inputs and the Arduino's data stream. For the former, used the patch decorator from the <a href="https://docs.python.org/3/library/unittest.mock.html" target="_blank">unittest.mock</a> library. For the latter, I created a class that would behave in the following ways compared to the serial object generated by <a href="https://pyserial.readthedocs.io/en/latest/" target="_blank">pySerial</a>:</p>
        <table>
            <tr>
                <th>Method</th>
                <th>pySerial's Serial</th>
                <th>Brad's SerialMock</th>
            </tr>
            <tr>
                <td>readline</td>
                <td>Returns a stream of bytes that stops after the newline</td>
                <td>Sleeps for a set delay to mimic Arduino's sleep, then returns a stream of bytes that stops after the newline</td>
            </tr>
            <tr>
                <td>open</td>
                <td>Opens the serial connection</td>
                <td>Does nothing (the "connection" is "opened" in the test file)</td>
            </tr>
            <tr>
                <td>close</td>
                <td>Closes the serial connection</td>
                <td>Does nothing (the "connection" is "closed" in the test file by garbage collection)</td>
            </tr>
        </table>
        <p>I also had to restructure the repository and add __init__.py files in the source and test directories to make calling pytest easier.</p>
        <h2>Results</h2>
        <p>The code, along with a detailed README file, has been uploaded to a <a href="https://www.github.com/Barabrad/BB-DAQ" target="_blank">GitHub repository</a> for others to use (mainly future students in that class).</p>
        <p>Also, I no longer need to set up my Arduino and manually run the tests each time I make a change in the data-processing parts of the code. These automated tests allow any user to run the tests and determine if an issue is with BB-DAQ or with the Arduino.</p>
        <br><br><br>
        <button onclick="goBack()">Go Back</button><br><br>
        <button onclick="goHome()">Portfolio Home</button>
    </body>
</html>
